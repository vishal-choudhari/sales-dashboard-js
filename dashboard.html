<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="styles.css">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="data.js" ></script>
</head>
<body>
    <div id="mainScreen" class="mainDiv">
        <h1 class="graphSectionLabels">Sales View</h1>
      <div class="row">
        <div class="column">
          <div class="card">
              <h3>Mix Of Business</h3>
              <div id="chart1"></div>
          </div>
        </div>
        <div class="column">
          <div class="card">
              <h3>Franchise Sales</h3>
              <div id="chart2"></div>
          </div>
        </div>
        <div class="column">
            <div class="card">
                <h3>Top 5 SKUs</h3>
                <div id="chart3"></div>
            </div>
          </div>
      </div>

      <h1 class="graphSectionLabels">Sales Comparison</h1>
      <div class="card" id="chart4"></div>
    </div>
</body>
<script>
    // Visualization API with the 'corechart' package.
    google.charts.load('visualization', { packages: ['corechart'] });
    google.charts.setOnLoadCallback(drawBarChart);
    google.charts.setOnLoadCallback(drawPieChart);
    google.charts.setOnLoadCallback(drawFranchiseGraph);
    google.charts.setOnLoadCallback(drawTopSku);

    function drawBarChart() {
                var data = JSON.parse(DATA);
                // console.log(data)
                var arrSales = [['Month', 'Sales Figure Current Year', 'Sales Figure Last Year']];    // Define an array and assign columns for the chart.

                data.forEach(populateArray);

                function populateArray(item){
                    arrSales.push([item.Month, item.Sales_Figure_Current_Year, item.Sales_Figure_Last_Year]);
                }

                // console.log(arrSales);
                // Set chart Options.
                var options = {
                    title: 'Sales Comparison LastYear VS CurrentYear',
                    curveType: 'function',
                    height: 400,
                    animation: {
                        startup: true,
                        duration: 1000,
                        easing: 'out'
                    },
                    legend: { position: 'bottom', textStyle: { color: '#555', fontSize: 14} }  // You can position the legend on 'top' or at the 'bottom'.
                };

                // Create DataTable and add the array to it.
                var figures = google.visualization.arrayToDataTable(arrSales)

                // Define the chart type (LineChart) and the container (a DIV in our case).
                var chart = new google.visualization.ColumnChart(document.getElementById('chart4'));
                chart.draw(figures, options);      // Draw the chart with Options.
            }

            function drawPieChart() {
                var data = JSON.parse(PIE);
                console.log(data)
                var arrSales = [['MOB Item', 'Sale This Month']];    // Define an array and assign columns for the chart.

                data.forEach(populateArray);

                function populateArray(item){
                    arrSales.push([item.MOBItem, item.SaleThisMonth ]);
                }

                console.log(arrSales);
                // Set chart Options.
                var options = {
                    // colors: ['#e0440e', '#e6693e', '#ec8f6e', '#f3b49f', '#f6c7b6'],
                    title: 'Mix Of Business',
                    height: 300,
                    animation: {
                        startup: true,
                        duration: 1000,
                        easing: 'out'
                    },
                    // curveType: 'function',
                    legend: { position: 'bottom', textStyle: { color: '#555', fontSize: 14} }  // You can position the legend on 'top' or at the 'bottom'.
                };

                // Create DataTable and add the array to it.
                var figures = google.visualization.arrayToDataTable(arrSales)

                // Define the chart type (LineChart) and the container (a DIV in our case).
                var chart = new google.visualization.PieChart(document.getElementById('chart1'));
                chart.draw(figures, options);      // Draw the chart with Options.
            }

            function drawFranchiseGraph() {
                var data = JSON.parse(FRANCHISE_DATA);
                // console.log(data)
                var arrSales = [['Franchise Name', 'Sale FYTD']];    // Define an array and assign columns for the chart.

                data.forEach(populateArray);

                function populateArray(item){
                    arrSales.push([item.FRANCHISE_NAME, item.SaleThisMonth ]);
                }

                // console.log(arrSales);
                // Set chart Options.
                var options = {
                    title: 'Franchise Sales',
                    height: 300,
                    bar: {groupWidth: "95%"},
                    legend: { position: "none" },
                    animation: {
                        startup: true,
                        duration: 1000,
                        easing: 'out',
                    },
                    legend: { position: 'bottom', textStyle: { color: '#555', fontSize: 14} }  // You can position the legend on 'top' or at the 'bottom'.
                };

                // Create DataTable and add the array to it.
                var figures = google.visualization.arrayToDataTable(arrSales)

                // Define the chart type (LineChart) and the container (a DIV in our case).
                var chart = new google.visualization.ColumnChart(document.getElementById('chart2'));
                chart.draw(figures, options);      // Draw the chart with Options.
            }

            function drawTopSku() {
                var data = JSON.parse(TOP_SKU);
                // console.log(data)
                var arrSales = [['SKU Name', 'Items Sold FYTD']];    // Define an array and assign columns for the chart.

                data.forEach(populateArray);

                function populateArray(item){
                    arrSales.push([item.SKU_NAME, item.SaleThisMonth ]);
                }

                // console.log(arrSales);
                // Set chart Options.
                var options = {
                    title: 'TOP SKUs',
                    height: 300,
                    bar: {groupWidth: "95%"},
                    legend: { position: "none" },
                    animation: {
                        startup: true,
                        duration: 1000,
                        easing: 'out',
                    },
                    legend: { position: 'bottom', textStyle: { color: '#555', fontSize: 14} }  // You can position the legend on 'top' or at the 'bottom'.
                };

                // Create DataTable and add the array to it.
                var figures = google.visualization.arrayToDataTable(arrSales)

                // Define the chart type (LineChart) and the container (a DIV in our case).
                var chart = new google.visualization.BarChart(document.getElementById('chart3'));
                chart.draw(figures, options);      // Draw the chart with Options.
            }
</script>
</html>